(window.webpackJsonpburning_air_client=window.webpackJsonpburning_air_client||[]).push([[0],{17:function(e,t,a){e.exports=a.p+"static/media/chair_empty.e143c198.png"},19:function(e,t,a){e.exports=a.p+"static/media/chair_filled.fa6ad40d.png"},36:function(e,t,a){e.exports=a(64)},41:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(32),i=a.n(r),c=(a(41),a(9)),o=a(14),s=function(){return l.a.createElement("div",null,l.a.createElement("h2",null,"Welcome to CrashTastic Airline "))},u=a(1),h=a(2),m=a(5),d=a(3),p=a(7),f=a(4),b=a(6),g=a.n(b),E=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={name:"",is_admin:!1},e._handleSubmit=e._handleSubmit.bind(Object(p.a)(e)),e._handleInputName=e._handleInputName.bind(Object(p.a)(e)),e._handleInputAdmin=e._handleInputAdmin.bind(Object(p.a)(e)),e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"_handleSubmit",value:function(e){e.preventDefault(),g.a.post("http://localhost:3000/users.json",{name:this.state.name,is_admin:this.state.is_admin}).then(function(e){console.log(e);var t=window.location.href;t.includes("#")&&(t=t.split("#")[0]+"#/"),window.location.replace(t)})}},{key:"_handleInputName",value:function(e){this.setState({name:e.target.value})}},{key:"_handleInputAdmin",value:function(){this.setState({is_admin:!0})}},{key:"render",value:function(){return l.a.createElement("form",{onSubmit:this._handleSubmit,action:"/"},l.a.createElement("label",null,"Name:",l.a.createElement("input",{name:"name",type:"text",placeholder:"type your name here",required:!0,onInput:this._handleInputName,defaultValue:""})),l.a.createElement("br",null),l.a.createElement("label",null,"Is admin:",l.a.createElement("input",{name:"is_admin",type:"checkbox",onClick:this._handleInputAdmin,defaultChecked:this.state.is_admin})),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Sign up"}))}}]),t}(n.Component),v="http://localhost:3000/flights.json",j=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).fetchFlights=function(t,a){g.a.get(v).then(function(n){for(var l=[],r=0;r<n.data.length;r++)n.data[r].from===t&&n.data[r].to===a&&l.push(n.data[r]);e.setState({flights:l}),console.log(e.state.flights)})},e.state={flights:[],hasLoaded:!1},e.fetchFlights=e.fetchFlights.bind(Object(p.a)(e)),e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"CrashTastic Airline"),l.a.createElement(y,{onSubmit:this.fetchFlights}),l.a.createElement(_,{flights:this.state.flights}))}}]),t}(n.Component),y=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={from:"",to:""},e._handleInputFrom=e._handleInputFrom.bind(Object(p.a)(e)),e._handleInputTo=e._handleInputTo.bind(Object(p.a)(e)),e._handleSubmit=e._handleSubmit.bind(Object(p.a)(e)),e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"_handleInputFrom",value:function(e){this.setState({from:e.target.value.toUpperCase()})}},{key:"_handleInputTo",value:function(e){this.setState({to:e.target.value.toUpperCase()})}},{key:"_handleSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.from,this.state.to)}},{key:"render",value:function(){return l.a.createElement("form",{onSubmit:this._handleSubmit},l.a.createElement("input",{type:"search",placeholder:"from",required:!0,onInput:this._handleInputFrom,defaultValue:""}),l.a.createElement("input",{type:"search",placeholder:"to",required:!0,onInput:this._handleInputTo,defaultValue:""}),l.a.createElement("input",{type:"submit",value:"search"}))}}]),t}(n.Component),_=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h3",null,"Flight Search Results"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Flight"),l.a.createElement("th",null,"From"),l.a.createElement("th",null," > "),l.a.createElement("th",null,"To"),l.a.createElement("th",null,"Plane"))),this.props.flights.map(function(e){return l.a.createElement("tbody",{key:e.id+1},l.a.createElement("tr",{key:e.id+2},l.a.createElement("td",{key:e.id+3},e.date),l.a.createElement("td",{key:e.id+4},l.a.createElement("a",{href:"http://localhost:3001/#/flight/"+e.id},e.flight_num)),l.a.createElement("td",{key:e.id+5},e.from),l.a.createElement("td",{key:e.id+6}," > "),l.a.createElement("td",{key:e.id+7},e.to),l.a.createElement("td",{key:e.id+8},e.airplane_id)))})))}}]),t}(n.Component),O=j,k=a(17),C=a.n(k),x=a(19),S=a.n(x),w=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={seats:"",flight:"",hasLoaded:!1,lastChecked:"",name:""};var n="http://localhost:3000/flights/"+a.props.match.params.id+".json";return function e(){g.a.get(n).then(function(t){a.setState({flight:t.data,seats:t.data.flight.seats,hasLoaded:!0}),setTimeout(e,4e3),console.log("get")})}(),a._handleCheck=a._handleCheck.bind(Object(p.a)(a)),a.uncheckSeat=a.uncheckSeat.bind(Object(p.a)(a)),a._handleInput=a._handleInput.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"_handleCheck",value:function(e){var t=this;e.preventDefault(),e.persist();var a=e.target.value,n="http://localhost:3000/seats/"+e.target.value+".json",l="http://localhost:3000/flights/"+this.props.match.params.id+".json";g.a.get(l).then(function(e){return t.setState({seats:e.data.flight.seats}),e}).then(function(r){var i=r.data.flight.seats.find(function(e){return e.id==a});console.log("seat taken "+i.is_taken),0==i.is_taken&&(e.target.checked=!0,t.uncheckSeat(),t.setState({lastChecked:e.target}),g.a.post(n,{is_taken:"true"!==e.target.dataset.booked,taken_by_user:t.state.name}).then(function(e){g.a.get(l).then(function(e){t.setState({seats:e.data.flight.seats})})}))})}},{key:"uncheckSeat",value:function(){var e=this;console.log(this.state.lastChecked);var t="http://localhost:3000/flights/"+this.props.match.params.id+".json",a="http://localhost:3000/seats/"+this.state.lastChecked.value+".json";g.a.post(a,{is_taken:!1,taken_by_user:""}).then(function(a){g.a.get(t).then(function(t){e.setState({seats:t.data.flight.seats})})})}},{key:"_handleInput",value:function(e){this.setState({name:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state.flight.flight;if(t){var a={display:"grid",gridTemplateColumns:"repeat("+t.airplane.columns+", 1fr)",gridTemplateRows:"repeat("+t.airplane.rows+", 1fr)",maxWidth:"800px",minWidth:"300px"},n={borderRadius:"3px",border:"1px solid #ccc",backgroundColor:"#eee",color:"#aaa",margin:"1px",textAlign:"center",padding:"8px",cursor:"not-allowed"},r={borderRadius:"3px",border:"1px solid #ccc",backgroundColor:"#eee",color:"#555",margin:"1px",textAlign:"center",padding:"8px",cursor:"pointer"},i={},c={width:"60px",height:"60px",display:"block"},o={display:"none"},s=this.state.seats,u="abcdefghijklmnopqrstuvwxyz".toUpperCase().split("");return l.a.createElement("div",null,l.a.createElement("h1",null,"Crapping Airline"),l.a.createElement("h2",null,"Flight ",t.flight_num),l.a.createElement("p",null,t.date," Flight ",t.flight_num," ",t.from," > ",t.to),l.a.createElement("p",null,"Name:",l.a.createElement("input",{type:"text",onInput:this._handleInput})),l.a.createElement("p",null,"Seats:"),l.a.createElement("div",{className:"planeContainer"},l.a.createElement("div",{style:a},s.sort(function(e,t){return e.row-t.row||e.column-t.column}).map(function(t){return l.a.createElement("label",{htmlFor:t.id,key:t.id,style:t.is_taken?n:r},l.a.createElement("input",{type:"radio",style:o,id:t.id,value:t.id,"data-booked":!!t.is_taken,onChange:e._handleCheck}),l.a.createElement("span",{style:i},t.column,u[t.row-1]," ",t.taken_by_user),l.a.createElement("img",{src:t.is_taken?S.a:C.a,style:c}))}))))}return l.a.createElement("p",null,"loading")}}]),t}(n.Component),F="http://localhost:3000/flights.json",A=function(e){function t(){var e;Object(u.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={flights:[],hasLoaded:!1};return function t(){g.a.get(F).then(function(a){e.setState({flights:a.data,hasLoaded:!0}),setTimeout(t,4e3)})}(),e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Crapping Airline"),l.a.createElement("p",null,"Testing whether we can communicate to rails. To do this we need to recieve: flights"),l.a.createElement("p",null,this.state.flights.map(function(e){return l.a.createElement("p",null,l.a.createElement("a",{href:"http://localhost:3001/#/flight/"+e.id},e.date,": flight ",e.id," from ",e.from," to ",e.to," on airplane ",e.airplane_id))})))}}]),t}(n.Component),I=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={user:"",hasLoaded:!1};var n="http://localhost:3000/users/"+a.props.match.params.id+".json";return function e(){g.a.get(n).then(function(t){a.setState({user:t.data,hasLoaded:!0}),setTimeout(e,4e3)})}(),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.state.hasLoaded?l.a.createElement("div",null,l.a.createElement("h1",null,"User Profile: ",this.state.user.user.name),l.a.createElement("p",null,"name: ",this.state.user.user.name),l.a.createElement("p",null,"admin: ",this.state.user.user.is_admin?"true":"false"),l.a.createElement("p",null,"flights:",l.a.createElement("ul",null,this.state.user.user.flights.map(function(e){return l.a.createElement("li",null,l.a.createElement("a",{href:"http://localhost:3001/#/flight/"+e.id},"Flight: ",e.from," > ",e.to,", Seat: ",e.reservation_column,e.reservation_row))})))):l.a.createElement("div",null,"loading...")}}]),t}(n.Component),T="http://localhost:3000/users.json",L=function(e){function t(){var e;Object(u.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={users:[],hasLoaded:!1};return function t(){g.a.get(T).then(function(a){e.setState({users:a.data,hasLoaded:!0}),setTimeout(t,4e3)})}(),e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Crapping Airline"),l.a.createElement("h2",null,"All Users"),l.a.createElement("p",null,this.state.users.map(function(e){return l.a.createElement("p",null,l.a.createElement("a",{href:"http://localhost:3001/#/user/"+e.id},e.name,", admin: ",e.is_admin?"true":"false"))})))}}]),t}(n.Component),q=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(c.b,{to:"/user"},"Log in"),"  |",l.a.createElement(c.b,{to:"/search"},"Search flight"),"  |",l.a.createElement(c.b,{to:"/flights"},"All flights"),"  |",l.a.createElement(c.b,{to:"/users"},"All users"),"  |",l.a.createElement(c.b,{to:"/admin"},"Admin"),"  |",l.a.createElement(c.b,{to:"/admin/airplanes"},"Create Airplane"),"  |",l.a.createElement(c.b,{to:"/admin/flights"},"Create flight"))}}]),t}(n.Component),N="http://localhost:3000/airplanes.json",W=function(e){function t(){var e;Object(u.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={airplanes:[],hasLoaded:!1};return function t(){g.a.get(N).then(function(a){e.setState({airplanes:a.data,hasLoaded:!0}),setTimeout(t,4e3)})}(),e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){this.state.airplanes;var e={borderRadius:"3px",border:"1px solid #ccc",backgroundColor:"#eee",backgroundImage:"url("+C.a+")",backgroundSize:"contain",backgroundRepeat:"no-repeat",color:"#555",margin:"1px",textAlign:"center",padding:"8px"},t="abcdefghijklmnopqrstuvwxyz".toUpperCase().split("");return l.a.createElement("div",null,l.a.createElement("h1",null,"Creat a New Airplane"),l.a.createElement("form",null,l.a.createElement("label",{htmlFor:"name"},"Name: "),l.a.createElement("input",{type:"text",id:"name",placeholder:"name"}),l.a.createElement("label",{htmlFor:"rows"},"Rows: "),l.a.createElement("input",{type:"number",id:"rows",placeholder:"5"}),l.a.createElement("label",{htmlFor:"columns"},"Columns: "),l.a.createElement("input",{type:"number",id:"columns",placeholder:"43"}),l.a.createElement("input",{type:"submit",value:"Create"})),l.a.createElement("h2",null,"All Airplanes"),this.state.airplanes.map(function(a){for(var n={display:"grid",gridTemplateColumns:"repeat("+a.columns+", auto)",gridTemplateRows:"repeat("+a.rows+", auto)",minWidth:"300px",maxWidth:"400px",minHeight:"300px",maxHeight:"400px"},r=[],i=a.rows*a.columns,c=0;c<a.rows;c++)for(var o=1;o<a.columns+1;o++)r.push(o+t[c]);for(var s=[],u=0;u<i;u++)s.push(u);return l.a.createElement("div",{key:a.id},l.a.createElement("p",null," Airplane ",a.name,": rows ",a.rows," columns ",a.columns),l.a.createElement("div",{style:n},r.map(function(t){return l.a.createElement("div",{key:t,style:e},t)})))}))}}]),t}(n.Component),R=a(35),U="http://localhost:3000/flights.json",D=function(e){function t(){var e;Object(u.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={flights:[],hasLoaded:!1},e.saveFlight=e.saveFlight.bind(Object(p.a)(e));return function t(){g.a.get(U).then(function(a){e.setState({flights:a.data,hasLoaded:!0}),setTimeout(t,4e3)})}(),e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"saveFlight",value:function(e){var t=this;g.a.post(U,{flight_num:e}).then(function(e){t.setState({flights:[].concat(Object(R.a)(t.state.flights),[e.data])})})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null," Burning Flights"),l.a.createElement(z,{onSubmit:this.saveFlight}),l.a.createElement(B,{flights:this.state.flights}))}}]),t}(n.Component),z=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={flight_num:""},e._handleChange=e._handleChange.bind(Object(p.a)(e)),e._handleSubmit=e._handleSubmit.bind(Object(p.a)(e)),e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"_handleSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.flight_num),this.setState({flight_num:""})}},{key:"_handleChange",value:function(e){this.setState({flight_num:e.target.value})}},{key:"render",value:function(){return l.a.createElement("form",{onSubmit:this._handleSubmit},l.a.createElement("label",{for:"flight_num"},"Flight #"),l.a.createElement("input",{onChange:this._handleChange,value:this.state.flight_num,type:"number",name:"flight_num",required:!0}),l.a.createElement("label",{for:"date"},"Date"),l.a.createElement("input",{type:"date",name:"date",required:!0}),l.a.createElement("label",{for:"from"},"From"),l.a.createElement("input",{type:"text",name:"from",required:!0}),l.a.createElement("label",{for:"to"},"To"),l.a.createElement("input",{type:"text",name:"to",required:!0}),l.a.createElement("label",{for:"airplane_id"},"Airplane"),l.a.createElement("input",{type:"number",name:"airplane_id",required:!0}),l.a.createElement("button",{type:"submit",value:"Tell"},"Create Flight"))}}]),t}(n.Component),B=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h3",null,"All existing flights"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"20%"},"Date"),l.a.createElement("th",{width:"20%"},"Flight"),l.a.createElement("th",{width:"20%"},"From > To"),l.a.createElement("th",{width:"20%"},"Plane"),l.a.createElement("th",{width:"20%"},"Seats"))),this.props.flights.map(function(e){return l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{align:"center"},e.date),l.a.createElement("td",{align:"center"},l.a.createElement("a",{href:"http://localhost:3001/#/flight/"+e.id}," ",e.flight_num)),l.a.createElement("td",{align:"center"},e.from.toUpperCase()," > ",e.to.toUpperCase()),l.a.createElement("td",{align:"center"},e.airplane_id),l.a.createElement("td",{align:"center"},"Seat")))})))}}]),t}(n.Component),P=D,V=function(){return l.a.createElement("div",null,l.a.createElement("h2",null,"Welcome to CrashTastic Airlines, what would you like to do today?"),l.a.createElement("p",null,l.a.createElement(c.b,{to:"/admin/flights"},"Create a Flight")),l.a.createElement("p",null,l.a.createElement(c.b,{to:"/admin/airplanes"},"Create an Airplane")))},H=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{style:{padding:"50px 0 30px 0",color:"grey",fontSize:"12px",textAlign:"right"}},"Thank you for booking your flights with us.")}}]),t}(n.Component),J=l.a.createElement(c.a,null,l.a.createElement("div",{style:{maxWidth:"1000px",margin:"0 auto",textAlign:"center"}},l.a.createElement(q,null),l.a.createElement("div",null,l.a.createElement(o.a,{exact:!0,path:"/",component:s}),l.a.createElement(o.a,{exact:!0,path:"/user",component:E}),l.a.createElement(o.a,{exact:!0,path:"/search",component:O}),l.a.createElement(o.a,{exact:!0,path:"/flights",component:A}),l.a.createElement(o.a,{exact:!0,path:"/admin",component:V}),l.a.createElement(o.a,{exact:!0,path:"/admin/airplanes",component:W}),l.a.createElement(o.a,{exact:!0,path:"/admin/flights",component:P}),l.a.createElement(o.a,{path:"/flight/:id",component:w}),l.a.createElement(o.a,{exact:!0,path:"/users",component:L}),l.a.createElement(o.a,{path:"/user/:id",component:I})),l.a.createElement(H,null)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(J,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.8ab7b03f.chunk.js.map